{"ast":null,"code":"import { OrderInProcessContext } from \"../contexts/OrderInProcessContext\";\nimport { deleteCookie, getCookie, setCookie } from \"./cookiesHelpers\";\nimport { fetchApi } from \"./fetchHelper\";\nexport function checkout(formData, errorHandler) {\n  let guestCustomerId = getCookie(\"guestCustomerId\");\n  const guestFirstName = formData.firstName;\n  const guestLastName = formData.lastName;\n  const guestEmail = formData.email;\n  delete formData.firstName;\n  delete formData.lastName;\n  delete formData.email;\n  const fetchUrl = `http://localhost:5000/api/checkout`;\n  if (!guestCustomerId) {\n    guestCustomerId = Date.now();\n    setCookie(\"guestCustomerId\", guestCustomerId);\n  }\n  const reqBody = {\n    paymentMethod: \"mollie\",\n    returnUrl: \"http://localhost:3000/checkout/return\",\n    guestCustomerId: parseInt(guestCustomerId.slice(-9)),\n    guestFirstName: guestFirstName,\n    guestLastName: guestLastName,\n    guestEmail: guestEmail,\n    address: formData\n  };\n  const options = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\" // Set content type to JSON\n    },\n\n    body: JSON.stringify(reqBody)\n  };\n  fetchApi(fetchUrl, options).then(res => {\n    setCookie(\"orderInProcess\", JSON.stringify(res.order));\n    deleteCookie(\"order\");\n    window.location.href = res.redirectUrl;\n    //setCookie(\"order\", JSON.stringify(res.order));\n  }).catch(err => errorHandler(err));\n}","map":{"version":3,"names":["OrderInProcessContext","deleteCookie","getCookie","setCookie","fetchApi","checkout","formData","errorHandler","guestCustomerId","guestFirstName","firstName","guestLastName","lastName","guestEmail","email","fetchUrl","Date","now","reqBody","paymentMethod","returnUrl","parseInt","slice","address","options","method","headers","body","JSON","stringify","then","res","order","window","location","href","redirectUrl","catch","err"],"sources":["/Users/hackyourfuture/Desktop/reactWorkSpace/React-Assignment/React-Full-Stack-Ecommerce-Web-App/react-frontend/src/helpers/checkoutHelper.js"],"sourcesContent":["import { OrderInProcessContext } from \"../contexts/OrderInProcessContext\";\nimport { deleteCookie, getCookie, setCookie } from \"./cookiesHelpers\";\nimport { fetchApi } from \"./fetchHelper\";\n\nexport function checkout(formData, errorHandler) {\n  let guestCustomerId = getCookie(\"guestCustomerId\");\n\n  const guestFirstName = formData.firstName;\n  const guestLastName = formData.lastName;\n  const guestEmail = formData.email;\n  delete formData.firstName;\n  delete formData.lastName;\n  delete formData.email;\n\n  const fetchUrl = `http://localhost:5000/api/checkout`;\n\n  if (!guestCustomerId) {\n    guestCustomerId = Date.now();\n    setCookie(\"guestCustomerId\", guestCustomerId);\n  }\n  const reqBody = {\n    paymentMethod: \"mollie\",\n    returnUrl: \"http://localhost:3000/checkout/return\",\n    guestCustomerId: parseInt(guestCustomerId.slice(-9)),\n    guestFirstName: guestFirstName,\n    guestLastName: guestLastName,\n    guestEmail: guestEmail,\n    address: formData,\n  };\n\n  const options = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\", // Set content type to JSON\n    },\n    body: JSON.stringify(reqBody),\n  };\n  fetchApi(fetchUrl, options)\n    .then((res) => {\n      setCookie(\"orderInProcess\", JSON.stringify(res.order));\n      deleteCookie(\"order\");\n\n      window.location.href = res.redirectUrl;\n      //setCookie(\"order\", JSON.stringify(res.order));\n    })\n    .catch((err) => errorHandler(err));\n}\n"],"mappings":"AAAA,SAASA,qBAAqB,QAAQ,mCAAmC;AACzE,SAASC,YAAY,EAAEC,SAAS,EAAEC,SAAS,QAAQ,kBAAkB;AACrE,SAASC,QAAQ,QAAQ,eAAe;AAExC,OAAO,SAASC,QAAQA,CAACC,QAAQ,EAAEC,YAAY,EAAE;EAC/C,IAAIC,eAAe,GAAGN,SAAS,CAAC,iBAAiB,CAAC;EAElD,MAAMO,cAAc,GAAGH,QAAQ,CAACI,SAAS;EACzC,MAAMC,aAAa,GAAGL,QAAQ,CAACM,QAAQ;EACvC,MAAMC,UAAU,GAAGP,QAAQ,CAACQ,KAAK;EACjC,OAAOR,QAAQ,CAACI,SAAS;EACzB,OAAOJ,QAAQ,CAACM,QAAQ;EACxB,OAAON,QAAQ,CAACQ,KAAK;EAErB,MAAMC,QAAQ,GAAI,oCAAmC;EAErD,IAAI,CAACP,eAAe,EAAE;IACpBA,eAAe,GAAGQ,IAAI,CAACC,GAAG,CAAC,CAAC;IAC5Bd,SAAS,CAAC,iBAAiB,EAAEK,eAAe,CAAC;EAC/C;EACA,MAAMU,OAAO,GAAG;IACdC,aAAa,EAAE,QAAQ;IACvBC,SAAS,EAAE,uCAAuC;IAClDZ,eAAe,EAAEa,QAAQ,CAACb,eAAe,CAACc,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IACpDb,cAAc,EAAEA,cAAc;IAC9BE,aAAa,EAAEA,aAAa;IAC5BE,UAAU,EAAEA,UAAU;IACtBU,OAAO,EAAEjB;EACX,CAAC;EAED,MAAMkB,OAAO,GAAG;IACdC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACP,cAAc,EAAE,kBAAkB,CAAE;IACtC,CAAC;;IACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACX,OAAO;EAC9B,CAAC;EACDd,QAAQ,CAACW,QAAQ,EAAES,OAAO,CAAC,CACxBM,IAAI,CAAEC,GAAG,IAAK;IACb5B,SAAS,CAAC,gBAAgB,EAAEyB,IAAI,CAACC,SAAS,CAACE,GAAG,CAACC,KAAK,CAAC,CAAC;IACtD/B,YAAY,CAAC,OAAO,CAAC;IAErBgC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAGJ,GAAG,CAACK,WAAW;IACtC;EACF,CAAC,CAAC,CACDC,KAAK,CAAEC,GAAG,IAAK/B,YAAY,CAAC+B,GAAG,CAAC,CAAC;AACtC"},"metadata":{},"sourceType":"module","externalDependencies":[]}