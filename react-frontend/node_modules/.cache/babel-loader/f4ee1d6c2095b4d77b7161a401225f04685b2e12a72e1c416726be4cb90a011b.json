{"ast":null,"code":"import{apiServer,frontEndDomain}from\"../environmentVariables\";import{deleteCookie,getCookie,setCookie}from\"./cookiesHelpers\";import{fetchApi}from\"./fetchHelper\";export function checkout(formData,errorHandler){var guestCustomerId=getCookie(\"guestCustomerId\");var guestFirstName=formData.firstName;var guestLastName=formData.lastName;var guestEmail=formData.email;delete formData.firstName;delete formData.lastName;delete formData.email;var fetchUrl=\"\".concat(apiServer,\"/api/checkout\");if(!guestCustomerId){guestCustomerId=Date.now();setCookie(\"guestCustomerId\",guestCustomerId);}var reqBody={paymentMethod:\"mollie\",returnUrl:\"\".concat(frontEndDomain,\"/checkout/return\"),guestCustomerId:parseInt(guestCustomerId.slice(-9)),guestFirstName:guestFirstName,guestLastName:guestLastName,guestEmail:guestEmail,address:formData};var options={method:\"POST\",headers:{\"Content-Type\":\"application/json\"// Set content type to JSON\n},body:JSON.stringify(reqBody)};fetchApi(fetchUrl,options).then(function(res){console.log(res);setCookie(\"orderInProcess\",JSON.stringify(res.order));deleteCookie(\"order\");window.location.href=res.redirectUrl;}).catch(function(err){return errorHandler(err);});}","map":{"version":3,"names":["apiServer","frontEndDomain","deleteCookie","getCookie","setCookie","fetchApi","checkout","formData","errorHandler","guestCustomerId","guestFirstName","firstName","guestLastName","lastName","guestEmail","email","fetchUrl","concat","Date","now","reqBody","paymentMethod","returnUrl","parseInt","slice","address","options","method","headers","body","JSON","stringify","then","res","console","log","order","window","location","href","redirectUrl","catch","err"],"sources":["/Users/hackyourfuture/Desktop/reactWorkSpace/react-ecommerce/react-ecommerce/react-frontend/src/helpers/checkoutHelper.js"],"sourcesContent":["import { apiServer, frontEndDomain } from \"../environmentVariables\";\nimport { deleteCookie, getCookie, setCookie } from \"./cookiesHelpers\";\nimport { fetchApi } from \"./fetchHelper\";\n\nexport function checkout(formData, errorHandler) {\n  let guestCustomerId = getCookie(\"guestCustomerId\");\n\n  const guestFirstName = formData.firstName;\n  const guestLastName = formData.lastName;\n  const guestEmail = formData.email;\n  delete formData.firstName;\n  delete formData.lastName;\n  delete formData.email;\n\n  const fetchUrl = `${apiServer}/api/checkout`;\n\n  if (!guestCustomerId) {\n    guestCustomerId = Date.now();\n    setCookie(\"guestCustomerId\", guestCustomerId);\n  }\n  const reqBody = {\n    paymentMethod: \"mollie\",\n    returnUrl: `${frontEndDomain}/checkout/return`,\n    guestCustomerId: parseInt(guestCustomerId.slice(-9)),\n    guestFirstName: guestFirstName,\n    guestLastName: guestLastName,\n    guestEmail: guestEmail,\n    address: formData,\n  };\n\n  const options = {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\", // Set content type to JSON\n    },\n    body: JSON.stringify(reqBody),\n  };\n  fetchApi(fetchUrl, options)\n    .then((res) => {\n      console.log(res);\n      setCookie(\"orderInProcess\", JSON.stringify(res.order));\n      deleteCookie(\"order\");\n\n      window.location.href = res.redirectUrl;\n    })\n    .catch((err) => errorHandler(err));\n}\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,cAAc,KAAQ,yBAAyB,CACnE,OAASC,YAAY,CAAEC,SAAS,CAAEC,SAAS,KAAQ,kBAAkB,CACrE,OAASC,QAAQ,KAAQ,eAAe,CAExC,MAAO,SAAS,CAAAC,QAAQA,CAACC,QAAQ,CAAEC,YAAY,CAAE,CAC/C,GAAI,CAAAC,eAAe,CAAGN,SAAS,CAAC,iBAAiB,CAAC,CAElD,GAAM,CAAAO,cAAc,CAAGH,QAAQ,CAACI,SAAS,CACzC,GAAM,CAAAC,aAAa,CAAGL,QAAQ,CAACM,QAAQ,CACvC,GAAM,CAAAC,UAAU,CAAGP,QAAQ,CAACQ,KAAK,CACjC,MAAO,CAAAR,QAAQ,CAACI,SAAS,CACzB,MAAO,CAAAJ,QAAQ,CAACM,QAAQ,CACxB,MAAO,CAAAN,QAAQ,CAACQ,KAAK,CAErB,GAAM,CAAAC,QAAQ,IAAAC,MAAA,CAAMjB,SAAS,iBAAe,CAE5C,GAAI,CAACS,eAAe,CAAE,CACpBA,eAAe,CAAGS,IAAI,CAACC,GAAG,CAAC,CAAC,CAC5Bf,SAAS,CAAC,iBAAiB,CAAEK,eAAe,CAAC,CAC/C,CACA,GAAM,CAAAW,OAAO,CAAG,CACdC,aAAa,CAAE,QAAQ,CACvBC,SAAS,IAAAL,MAAA,CAAKhB,cAAc,oBAAkB,CAC9CQ,eAAe,CAAEc,QAAQ,CAACd,eAAe,CAACe,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CACpDd,cAAc,CAAEA,cAAc,CAC9BE,aAAa,CAAEA,aAAa,CAC5BE,UAAU,CAAEA,UAAU,CACtBW,OAAO,CAAElB,QACX,CAAC,CAED,GAAM,CAAAmB,OAAO,CAAG,CACdC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAAoB;AACtC,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACX,OAAO,CAC9B,CAAC,CACDf,QAAQ,CAACW,QAAQ,CAAEU,OAAO,CAAC,CACxBM,IAAI,CAAC,SAACC,GAAG,CAAK,CACbC,OAAO,CAACC,GAAG,CAACF,GAAG,CAAC,CAChB7B,SAAS,CAAC,gBAAgB,CAAE0B,IAAI,CAACC,SAAS,CAACE,GAAG,CAACG,KAAK,CAAC,CAAC,CACtDlC,YAAY,CAAC,OAAO,CAAC,CAErBmC,MAAM,CAACC,QAAQ,CAACC,IAAI,CAAGN,GAAG,CAACO,WAAW,CACxC,CAAC,CAAC,CACDC,KAAK,CAAC,SAACC,GAAG,QAAK,CAAAlC,YAAY,CAACkC,GAAG,CAAC,GAAC,CACtC"},"metadata":{},"sourceType":"module","externalDependencies":[]}