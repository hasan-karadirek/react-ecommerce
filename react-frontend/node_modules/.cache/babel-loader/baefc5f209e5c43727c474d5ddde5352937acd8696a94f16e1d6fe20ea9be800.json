{"ast":null,"code":"import _slicedToArray from\"/Users/hackyourfuture/Desktop/reactWorkSpace/react-ecommerce/react-ecommerce/react-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import useApiFetch from\"../hooks/useApiFetch\";import{Link}from\"react-router-dom\";import cartIcon from\"../assets/cart.svg\";import{updateCart}from\"../helpers/updateCartHelper\";import{apiServer}from\"../environmentVariables\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProductList(_ref){var categorySlug=_ref.categorySlug,errorHandler=_ref.errorHandler,handleOrderContext=_ref.handleOrderContext;var url=categorySlug?\"\".concat(apiServer,\"/api/category/\").concat(categorySlug,\"?limit=20\"):\"\";var options={method:\"GET\"};var _useApiFetch=useApiFetch(url,options,errorHandler),_useApiFetch2=_slicedToArray(_useApiFetch,2),products=_useApiFetch2[0],loading=_useApiFetch2[1];var mouseEnter=function mouseEnter(e){var button=e.currentTarget.querySelector(\".product-card-add-to-cart\");button.classList.remove(\"hidden\");};var mouseLeave=function mouseLeave(e){var button=e.currentTarget.querySelector(\".product-card-add-to-cart\");button.classList.add(\"hidden\");};var productList=products.products?products.products.map(function(product){return/*#__PURE__*/_jsxs(\"li\",{className:\"product-card-container\",onMouseEnter:function onMouseEnter(e){return mouseEnter(e);},onMouseLeave:function onMouseLeave(e){return mouseLeave(e);},children:[/*#__PURE__*/_jsxs(Link,{className:\"product-link\",to:\"/product/\".concat(product.slug),children:[/*#__PURE__*/_jsx(\"img\",{className:\"product-card-image\",src:\"\".concat(apiServer,\"/api/productImages/\").concat(product.ProductImages[0].path.split(\"/\")[3]),alt:product.slug}),/*#__PURE__*/_jsx(\"span\",{className:\"product-cart-title\",children:product.name}),/*#__PURE__*/_jsxs(\"span\",{className:\"product-card-price\",children:[product.price,\"$\"]})]}),/*#__PURE__*/_jsx(\"button\",{id:product.id,onClick:function onClick(e){updateCart(e.target.id,handleOrderContext,\"add\",errorHandler);},className:\"product-card-add-to-cart hidden\",children:/*#__PURE__*/_jsx(\"img\",{id:product.id,alt:\"cart-icon\",src:cartIcon})},product.id)]},product.id);}):[];return/*#__PURE__*/_jsx(_Fragment,{children:loading?/*#__PURE__*/_jsx(\"p\",{children:\"loading\"}):/*#__PURE__*/_jsx(\"ul\",{className:\"product-list\",children:productList})});}","map":{"version":3,"names":["React","useEffect","useState","useApiFetch","Link","cartIcon","updateCart","apiServer","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ProductList","_ref","categorySlug","errorHandler","handleOrderContext","url","concat","options","method","_useApiFetch","_useApiFetch2","_slicedToArray","products","loading","mouseEnter","e","button","currentTarget","querySelector","classList","remove","mouseLeave","add","productList","map","product","className","onMouseEnter","onMouseLeave","children","to","slug","src","ProductImages","path","split","alt","name","price","id","onClick","target"],"sources":["/Users/hackyourfuture/Desktop/reactWorkSpace/react-ecommerce/react-ecommerce/react-frontend/src/components/ProductList.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport useApiFetch from \"../hooks/useApiFetch\";\nimport { Link } from \"react-router-dom\";\nimport cartIcon from \"../assets/cart.svg\";\nimport { updateCart } from \"../helpers/updateCartHelper\";\nimport { apiServer } from \"../environmentVariables\";\n\nexport default function ProductList({\n  categorySlug,\n  errorHandler,\n  handleOrderContext,\n}) {\n  const url = categorySlug\n    ? `${apiServer}/api/category/${categorySlug}?limit=20`\n    : \"\";\n  const options = { method: \"GET\" };\n  const [products, loading] = useApiFetch(url, options, errorHandler);\n  const mouseEnter = (e) => {\n    const button = e.currentTarget.querySelector(\".product-card-add-to-cart\");\n    button.classList.remove(\"hidden\");\n  };\n\n  const mouseLeave = (e) => {\n    const button = e.currentTarget.querySelector(\".product-card-add-to-cart\");\n    button.classList.add(\"hidden\");\n  };\n\n  const productList = products.products\n    ? products.products.map((product) => {\n        return (\n          <li\n            key={product.id}\n            className=\"product-card-container\"\n            onMouseEnter={(e) => mouseEnter(e)}\n            onMouseLeave={(e) => mouseLeave(e)}\n          >\n            <Link className=\"product-link\" to={`/product/${product.slug}`}>\n              <img\n                className=\"product-card-image\"\n                src={`${apiServer}/api/productImages/${\n                  product.ProductImages[0].path.split(\"/\")[3]\n                }`}\n                alt={product.slug}\n              />\n              <span className=\"product-cart-title\">{product.name}</span>\n              <span className=\"product-card-price\">{product.price}$</span>\n            </Link>\n            <button\n              key={product.id}\n              id={product.id}\n              onClick={(e) => {\n                updateCart(\n                  e.target.id,\n                  handleOrderContext,\n                  \"add\",\n                  errorHandler\n                );\n              }}\n              className=\"product-card-add-to-cart hidden\"\n            >\n              <img id={product.id} alt=\"cart-icon\" src={cartIcon} />\n            </button>\n          </li>\n        );\n      })\n    : [];\n  return (\n    <>\n      {loading ? (\n        <p>loading</p>\n      ) : (\n        <ul className=\"product-list\">{productList}</ul>\n      )}\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}