{"ast":null,"code":"import _slicedToArray from\"/Users/hackyourfuture/Desktop/reactWorkSpace/react-ecommerce/react-ecommerce/react-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useEffect}from\"react\";import useApiFetch from\"../hooks/useApiFetch\";import{Link}from\"react-router-dom\";import cartIcon from\"../assets/cart.svg\";import{OrderContext}from\"../contexts/OrderContext\";import{setCookie}from\"../helpers/cookiesHelpers\";import{CategoryContext}from\"../contexts/CategoryContext\";import{apiServer}from\"../environmentVariables\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Navbar(_ref){var errorHandler=_ref.errorHandler;var _useContext=useContext(OrderContext),orderContext=_useContext.orderContext,handleOrderContext=_useContext.handleOrderContext;var _useContext2=useContext(CategoryContext),categoryContext=_useContext2.categoryContext,handleCategoryContext=_useContext2.handleCategoryContext;var orderQuantity=orderContext?orderContext.Products.reduce(function(acc,product){return acc+=product.OrderDetail.quantity;},0):0;var _useApiFetch=useApiFetch(\"\".concat(apiServer,\"/api/category/all\"),{},errorHandler),_useApiFetch2=_slicedToArray(_useApiFetch,2),result=_useApiFetch2[0],loading=_useApiFetch2[1];var categoriesArr=result&&result.categories?result.categories:[];useEffect(function(){setCookie(\"categories\",JSON.stringify(categoriesArr));handleCategoryContext();},[categoriesArr]);var categoryList=categoriesArr?categoriesArr.map(function(category){return/*#__PURE__*/_jsx(\"li\",{className:\"navbar-item\",children:/*#__PURE__*/_jsx(Link,{className:\"navbar-link\",to:\"/category/\".concat(category.slug),children:category.name})},category.slug);}):[];return loading?/*#__PURE__*/_jsx(\"p\",{children:\"loading\"}):/*#__PURE__*/_jsx(\"div\",{className:\"navbar\",children:/*#__PURE__*/_jsxs(\"ul\",{className:\"navbar-items\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"navbar-items-left\",children:categoryList}),/*#__PURE__*/_jsx(\"div\",{className:\"navbar-items-right\",children:/*#__PURE__*/_jsx(Link,{className:\"navbar-cart-button\",to:\"/cart\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"cart-button\",style:{backgroundColor:orderQuantity!==0?\"#58ba54\":\"\"},children:[/*#__PURE__*/_jsx(\"img\",{alt:\"cart-icon\",src:cartIcon}),/*#__PURE__*/_jsx(\"span\",{className:\"cart-quantity\",children:orderQuantity}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Search\",className:\"search-input\"})]})})})]})});}","map":{"version":3,"names":["React","useContext","useEffect","useApiFetch","Link","cartIcon","OrderContext","setCookie","CategoryContext","apiServer","jsx","_jsx","jsxs","_jsxs","Navbar","_ref","errorHandler","_useContext","orderContext","handleOrderContext","_useContext2","categoryContext","handleCategoryContext","orderQuantity","Products","reduce","acc","product","OrderDetail","quantity","_useApiFetch","concat","_useApiFetch2","_slicedToArray","result","loading","categoriesArr","categories","JSON","stringify","categoryList","map","category","className","children","to","slug","name","style","backgroundColor","alt","src","placeholder"],"sources":["/Users/hackyourfuture/Desktop/reactWorkSpace/react-ecommerce/react-ecommerce/react-frontend/src/components/Navbar.js"],"sourcesContent":["import React, { useContext, useEffect } from \"react\";\nimport useApiFetch from \"../hooks/useApiFetch\";\nimport { Link } from \"react-router-dom\";\nimport cartIcon from \"../assets/cart.svg\";\nimport { OrderContext } from \"../contexts/OrderContext\";\nimport { setCookie } from \"../helpers/cookiesHelpers\";\nimport { CategoryContext } from \"../contexts/CategoryContext\";\nimport { apiServer } from \"../environmentVariables\";\n\nexport default function Navbar({ errorHandler }) {\n  const { orderContext, handleOrderContext } = useContext(OrderContext);\n  const { categoryContext, handleCategoryContext } =\n    useContext(CategoryContext);\n  const orderQuantity = orderContext\n    ? orderContext.Products.reduce((acc, product) => {\n        return (acc += product.OrderDetail.quantity);\n      }, 0)\n    : 0;\n  const [result, loading] = useApiFetch(\n    `${apiServer}/api/category/all`,\n    {},\n    errorHandler\n  );\n  const categoriesArr = result && result.categories ? result.categories : [];\n  useEffect(() => {\n    setCookie(\"categories\", JSON.stringify(categoriesArr));\n    handleCategoryContext();\n  }, [categoriesArr]);\n\n  const categoryList = categoriesArr\n    ? categoriesArr.map((category) => {\n        return (\n          <li key={category.slug} className=\"navbar-item\">\n            <Link className=\"navbar-link\" to={`/category/${category.slug}`}>\n              {category.name}\n            </Link>\n          </li>\n        );\n      })\n    : [];\n\n  return loading ? (\n    <p>loading</p>\n  ) : (\n    <div className=\"navbar\">\n      <ul className=\"navbar-items\">\n        <div className=\"navbar-items-left\">{categoryList}</div>\n        <div className=\"navbar-items-right\">\n          <Link className=\"navbar-cart-button\" to={\"/cart\"}>\n            <button\n              className=\"cart-button\"\n              style={{\n                backgroundColor: orderQuantity !== 0 ? \"#58ba54\" : \"\",\n              }}\n            >\n              <img alt=\"cart-icon\" src={cartIcon} />\n              <span className=\"cart-quantity\">{orderQuantity}</span>\n              <input placeholder=\"Search\" className=\"search-input\" />\n            </button>\n          </Link>\n        </div>\n      </ul>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}